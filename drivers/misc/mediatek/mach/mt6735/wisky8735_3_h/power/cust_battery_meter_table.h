#ifndef _CUST_BATTERY_METER_TABLE_H
#define _CUST_BATTERY_METER_TABLE_H

#include <mach/mt_typedefs.h>

// ============================================================
// define
// ============================================================
#define BAT_NTC_10 1
#define BAT_NTC_47 0

#if (BAT_NTC_10 == 1)
#define RBAT_PULL_UP_R             16900	
#endif

#if (BAT_NTC_47 == 1)
#define RBAT_PULL_UP_R             61900	
#endif

#define RBAT_PULL_UP_VOLT          1800



// ============================================================
// ENUM
// ============================================================

// ============================================================
// structure
// ============================================================

// ============================================================
// typedef
// ============================================================
typedef struct _BATTERY_PROFILE_STRUC
{
    kal_int32 percentage;
    kal_int32 voltage;
} BATTERY_PROFILE_STRUC, *BATTERY_PROFILE_STRUC_P;

typedef struct _R_PROFILE_STRUC
{
    kal_int32 resistance; // Ohm
    kal_int32 voltage;
} R_PROFILE_STRUC, *R_PROFILE_STRUC_P;

typedef enum
{
    T1_0C,
    T2_25C,
    T3_50C
} PROFILE_TEMPERATURE;

// ============================================================
// External Variables
// ============================================================

// ============================================================
// External function
// ============================================================

// ============================================================
// <DOD, Battery_Voltage> Table
// ============================================================
#if (BAT_NTC_10 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,72970},
        {-15,56830},
        {-10,44610},
        { -5,35300},
        {  0,28130},
        {  5,22580},
        { 10,18250},
        { 15,14840},
        { 20,12150},
        { 25,10000},
        { 30,8280},
        { 35,6890},
        { 40,5770},
        { 45,4850},
        { 50,4100},
        { 55,3480},
        { 60,2960}
    };
#endif

#if (BAT_NTC_47 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,483954},
        {-15,360850},
        {-10,271697},
        { -5,206463},
        {  0,158214},
        {  5,122259},
        { 10,95227},
        { 15,74730},
        { 20,59065},
        { 25,47000},
        { 30,37643},
        { 35,30334},
        { 40,24591},
        { 45,20048},
        { 50,16433},
        { 55,13539},
        { 60,11210}        
    };
#endif

// T0 -10C
BATTERY_PROFILE_STRUC battery_profile_t0[] =
{
	{0	,4337},
	{1	,4308},
	{3	,4287},
	{4	,4270},
	{6	,4251},
	{7	,4235},
	{9	,4218},
	{10 ,4199},
	{11 ,4184},
	{13 ,4167},
	{14 ,4152},
	{16 ,4136},
	{17 ,4121},
	{19 ,4105},
	{20 ,4091},
	{21 ,4075},
	{23 ,4063},
	{24 ,4048},
	{26 ,4034},
	{27 ,4018},
	{29 ,4005},
	{30 ,3993},
	{32 ,3982},
	{33 ,3972},
	{34 ,3960},
	{36 ,3948},
	{37 ,3937},
	{39 ,3926},
	{40 ,3915},
	{42 ,3901},
	{43 ,3886},
	{44 ,3870},
	{46 ,3858},
	{47 ,3848},
	{49 ,3839},
	{50 ,3832},
	{52 ,3826},
	{53 ,3818},
	{54 ,3812},
	{56 ,3807},
	{57 ,3802},
	{59 ,3797},
	{60 ,3793},
	{62 ,3788},
	{63 ,3785},
	{64 ,3781},
	{66 ,3777},
	{67 ,3775},
	{69 ,3772},
	{70 ,3770},
	{72 ,3766},
	{73 ,3761},
	{74 ,3757},
	{76 ,3752},
	{77 ,3749},
	{79 ,3743},
	{80 ,3738},
	{82 ,3731},
	{83 ,3725},
	{84 ,3717},
	{86 ,3708},
	{87 ,3698},
	{89 ,3687},
	{90 ,3677},
	{92 ,3671},
	{93 ,3666},
	{94 ,3659},
	{96 ,3643},
	{97 ,3595},
	{99 ,3512},
	{100,3384} 
};      
        
// T1 0C 
BATTERY_PROFILE_STRUC battery_profile_t1[] =
{
	{0	,4337},
	{1	,4308},
	{3	,4287},
	{4	,4270},
	{6	,4251},
	{7	,4235},
	{9	,4218},
	{10 ,4199},
	{11 ,4184},
	{13 ,4167},
	{14 ,4152},
	{16 ,4136},
	{17 ,4121},
	{19 ,4105},
	{20 ,4091},
	{21 ,4075},
	{23 ,4063},
	{24 ,4048},
	{26 ,4034},
	{27 ,4018},
	{29 ,4005},
	{30 ,3993},
	{32 ,3982},
	{33 ,3972},
	{34 ,3960},
	{36 ,3948},
	{37 ,3937},
	{39 ,3926},
	{40 ,3915},
	{42 ,3901},
	{43 ,3886},
	{44 ,3870},
	{46 ,3858},
	{47 ,3848},
	{49 ,3839},
	{50 ,3832},
	{52 ,3826},
	{53 ,3818},
	{54 ,3812},
	{56 ,3807},
	{57 ,3802},
	{59 ,3797},
	{60 ,3793},
	{62 ,3788},
	{63 ,3785},
	{64 ,3781},
	{66 ,3777},
	{67 ,3775},
	{69 ,3772},
	{70 ,3770},
	{72 ,3766},
	{73 ,3761},
	{74 ,3757},
	{76 ,3752},
	{77 ,3749},
	{79 ,3743},
	{80 ,3738},
	{82 ,3731},
	{83 ,3725},
	{84 ,3717},
	{86 ,3708},
	{87 ,3698},
	{89 ,3687},
	{90 ,3677},
	{92 ,3671},
	{93 ,3666},
	{94 ,3659},
	{96 ,3643},
	{97 ,3595},
	{99 ,3512},
	{100,3384} 
};           

// T2 25C
BATTERY_PROFILE_STRUC battery_profile_t2[] =
{
	{0	,4337},
	{1	,4308},
	{3	,4287},
	{4	,4270},
	{6	,4251},
	{7	,4235},
	{9	,4218},
	{10 ,4199},
	{11 ,4184},
	{13 ,4167},
	{14 ,4152},
	{16 ,4136},
	{17 ,4121},
	{19 ,4105},
	{20 ,4091},
	{21 ,4075},
	{23 ,4063},
	{24 ,4048},
	{26 ,4034},
	{27 ,4018},
	{29 ,4005},
	{30 ,3993},
	{32 ,3982},
	{33 ,3972},
	{34 ,3960},
	{36 ,3948},
	{37 ,3937},
	{39 ,3926},
	{40 ,3915},
	{42 ,3901},
	{43 ,3886},
	{44 ,3870},
	{46 ,3858},
	{47 ,3848},
	{49 ,3839},
	{50 ,3832},
	{52 ,3826},
	{53 ,3818},
	{54 ,3812},
	{56 ,3807},
	{57 ,3802},
	{59 ,3797},
	{60 ,3793},
	{62 ,3788},
	{63 ,3785},
	{64 ,3781},
	{66 ,3777},
	{67 ,3775},
	{69 ,3772},
	{70 ,3770},
	{72 ,3766},
	{73 ,3761},
	{74 ,3757},
	{76 ,3752},
	{77 ,3749},
	{79 ,3743},
	{80 ,3738},
	{82 ,3731},
	{83 ,3725},
	{84 ,3717},
	{86 ,3708},
	{87 ,3698},
	{89 ,3687},
	{90 ,3677},
	{92 ,3671},
	{93 ,3666},
	{94 ,3659},
	{96 ,3643},
	{97 ,3595},
	{99 ,3512},
	{100,3384} 
};     

// T3 50C
BATTERY_PROFILE_STRUC battery_profile_t3[] =
{
	{0	,4337},
	{1	,4308},
	{3	,4287},
	{4	,4270},
	{6	,4251},
	{7	,4235},
	{9	,4218},
	{10 ,4199},
	{11 ,4184},
	{13 ,4167},
	{14 ,4152},
	{16 ,4136},
	{17 ,4121},
	{19 ,4105},
	{20 ,4091},
	{21 ,4075},
	{23 ,4063},
	{24 ,4048},
	{26 ,4034},
	{27 ,4018},
	{29 ,4005},
	{30 ,3993},
	{32 ,3982},
	{33 ,3972},
	{34 ,3960},
	{36 ,3948},
	{37 ,3937},
	{39 ,3926},
	{40 ,3915},
	{42 ,3901},
	{43 ,3886},
	{44 ,3870},
	{46 ,3858},
	{47 ,3848},
	{49 ,3839},
	{50 ,3832},
	{52 ,3826},
	{53 ,3818},
	{54 ,3812},
	{56 ,3807},
	{57 ,3802},
	{59 ,3797},
	{60 ,3793},
	{62 ,3788},
	{63 ,3785},
	{64 ,3781},
	{66 ,3777},
	{67 ,3775},
	{69 ,3772},
	{70 ,3770},
	{72 ,3766},
	{73 ,3761},
	{74 ,3757},
	{76 ,3752},
	{77 ,3749},
	{79 ,3743},
	{80 ,3738},
	{82 ,3731},
	{83 ,3725},
	{84 ,3717},
	{86 ,3708},
	{87 ,3698},
	{89 ,3687},
	{90 ,3677},
	{92 ,3671},
	{93 ,3666},
	{94 ,3659},
	{96 ,3643},
	{97 ,3595},
	{99 ,3512},
	{100,3384} 
};           

// battery profile for actual temperature. The size should be the same as T1, T2 and T3
BATTERY_PROFILE_STRUC battery_profile_temperature[] =
{
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0}
};    

// ============================================================
// <Rbat, Battery_Voltage> Table
// ============================================================
// T0 -10C
R_PROFILE_STRUC r_profile_t0[] =
{
	{103,4337},
	{103,4308},
	{103,4287},
	{107,4270},
	{105,4251},
	{110,4235},
	{108,4218},
	{105,4199},
	{107,4184},
	{108,4167},
	{113,4152},
	{112,4136},
	{117,4121},
	{123,4105},
	{135,4091},
	{132,4075},
	{133,4063},
	{135,4048},
	{137,4034},
	{135,4018},
	{138,4005},
	{140,3993},
	{143,3982},
	{143,3972},
	{143,3960},
	{143,3948},
	{148,3937},
	{145,3926},
	{145,3915},
	{142,3901},
	{132,3886},
	{122,3870},
	{118,3858},
	{113,3848},
	{112,3839},
	{110,3832},
	{112,3826},
	{110,3818},
	{110,3812},
	{110,3807},
	{110,3802},
	{112,3797},
	{113,3793},
	{113,3788},
	{113,3785},
	{115,3781},
	{115,3777},
	{120,3775},
	{125,3772},
	{128,3770},
	{128,3766},
	{125,3761},
	{125,3757},
	{125,3752},
	{130,3749},
	{133,3743},
	{133,3738},
	{130,3731},
	{130,3725},
	{135,3717},
	{133,3708},
	{130,3698},
	{133,3687},
	{133,3677},
	{135,3671},
	{142,3666},
	{150,3659},
	{167,3643},
	{178,3595},
	{205,3512},
	{293,3384}
};      

// T1 0C
R_PROFILE_STRUC r_profile_t1[] =
{
	{103,4337},
	{103,4308},
	{103,4287},
	{107,4270},
	{105,4251},
	{110,4235},
	{108,4218},
	{105,4199},
	{107,4184},
	{108,4167},
	{113,4152},
	{112,4136},
	{117,4121},
	{123,4105},
	{135,4091},
	{132,4075},
	{133,4063},
	{135,4048},
	{137,4034},
	{135,4018},
	{138,4005},
	{140,3993},
	{143,3982},
	{143,3972},
	{143,3960},
	{143,3948},
	{148,3937},
	{145,3926},
	{145,3915},
	{142,3901},
	{132,3886},
	{122,3870},
	{118,3858},
	{113,3848},
	{112,3839},
	{110,3832},
	{112,3826},
	{110,3818},
	{110,3812},
	{110,3807},
	{110,3802},
	{112,3797},
	{113,3793},
	{113,3788},
	{113,3785},
	{115,3781},
	{115,3777},
	{120,3775},
	{125,3772},
	{128,3770},
	{128,3766},
	{125,3761},
	{125,3757},
	{125,3752},
	{130,3749},
	{133,3743},
	{133,3738},
	{130,3731},
	{130,3725},
	{135,3717},
	{133,3708},
	{130,3698},
	{133,3687},
	{133,3677},
	{135,3671},
	{142,3666},
	{150,3659},
	{167,3643},
	{178,3595},
	{205,3512},
	{293,3384}
};     

// T2 25C
R_PROFILE_STRUC r_profile_t2[] =
{
	{103,4337},
	{103,4308},
	{103,4287},
	{107,4270},
	{105,4251},
	{110,4235},
	{108,4218},
	{105,4199},
	{107,4184},
	{108,4167},
	{113,4152},
	{112,4136},
	{117,4121},
	{123,4105},
	{135,4091},
	{132,4075},
	{133,4063},
	{135,4048},
	{137,4034},
	{135,4018},
	{138,4005},
	{140,3993},
	{143,3982},
	{143,3972},
	{143,3960},
	{143,3948},
	{148,3937},
	{145,3926},
	{145,3915},
	{142,3901},
	{132,3886},
	{122,3870},
	{118,3858},
	{113,3848},
	{112,3839},
	{110,3832},
	{112,3826},
	{110,3818},
	{110,3812},
	{110,3807},
	{110,3802},
	{112,3797},
	{113,3793},
	{113,3788},
	{113,3785},
	{115,3781},
	{115,3777},
	{120,3775},
	{125,3772},
	{128,3770},
	{128,3766},
	{125,3761},
	{125,3757},
	{125,3752},
	{130,3749},
	{133,3743},
	{133,3738},
	{130,3731},
	{130,3725},
	{135,3717},
	{133,3708},
	{130,3698},
	{133,3687},
	{133,3677},
	{135,3671},
	{142,3666},
	{150,3659},
	{167,3643},
	{178,3595},
	{205,3512},
	{293,3384}
}; 

// T3 50C
R_PROFILE_STRUC r_profile_t3[] =
{
	{103,4337},
	{103,4308},
	{103,4287},
	{107,4270},
	{105,4251},
	{110,4235},
	{108,4218},
	{105,4199},
	{107,4184},
	{108,4167},
	{113,4152},
	{112,4136},
	{117,4121},
	{123,4105},
	{135,4091},
	{132,4075},
	{133,4063},
	{135,4048},
	{137,4034},
	{135,4018},
	{138,4005},
	{140,3993},
	{143,3982},
	{143,3972},
	{143,3960},
	{143,3948},
	{148,3937},
	{145,3926},
	{145,3915},
	{142,3901},
	{132,3886},
	{122,3870},
	{118,3858},
	{113,3848},
	{112,3839},
	{110,3832},
	{112,3826},
	{110,3818},
	{110,3812},
	{110,3807},
	{110,3802},
	{112,3797},
	{113,3793},
	{113,3788},
	{113,3785},
	{115,3781},
	{115,3777},
	{120,3775},
	{125,3772},
	{128,3770},
	{128,3766},
	{125,3761},
	{125,3757},
	{125,3752},
	{130,3749},
	{133,3743},
	{133,3738},
	{130,3731},
	{130,3725},
	{135,3717},
	{133,3708},
	{130,3698},
	{133,3687},
	{133,3677},
	{135,3671},
	{142,3666},
	{150,3659},
	{167,3643},
	{178,3595},
	{205,3512},
	{293,3384}
}; 

// r-table profile for actual temperature. The size should be the same as T1, T2 and T3
R_PROFILE_STRUC r_profile_temperature[] =
{
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0},
	{0, 0}
};    

// ============================================================
// function prototype
// ============================================================
int fgauge_get_saddles(void);
BATTERY_PROFILE_STRUC_P fgauge_get_profile(kal_uint32 temperature);

int fgauge_get_saddles_r_table(void);
R_PROFILE_STRUC_P fgauge_get_profile_r_table(kal_uint32 temperature);

#endif	//#ifndef _CUST_BATTERY_METER_TABLE_H

